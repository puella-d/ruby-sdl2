<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: SDL2::Surface
  
    &mdash; Documentation by YARD 0.9.25
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "SDL2::Surface";
  relpath = '../';
</script>


  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../_index.html">Index (S)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../SDL2.html" title="SDL2 (module)">SDL2</a></span></span>
     &raquo; 
    <span class="title">Surface</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: SDL2::Surface
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">SDL2::Surface</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>ext/sdl2_ext/video.c<span class="defines">,<br />
  ext/sdl2_ext/video.c</span>
</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>This class represents bitmap images (collection of pixels).</p>

<p>Normally in SDL2, this class is not used for drawing a image on a window. <span class='object_link'><a href="Texture.html" title="SDL2::Texture (class)">Texture</a></span> is used for the purpose.</p>

<p>Mainly this class is for compatibility with SDL1, but the class is useful for simple pixel manipulation. For example, <span class='object_link'><a href="TTF.html" title="SDL2::TTF (class)">TTF</a></span> can create only surfaces, not textures. You can convert a surface to texture with <span class='object_link'><a href="Renderer.html#create_texture_from-instance_method" title="SDL2::Renderer#create_texture_from (method)">Renderer#create_texture_from</a></span>.</p>


  </div>
</div>
<div class="tags">
  

</div>






  
    <h2>
      Class Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#blit-class_method" title="blit (class method)">.<strong>blit</strong>(src, srcrect, dst, dstrect)  &#x21d2; nil </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Perform a fast blit from *<strong>src</strong>* surface to *<strong>dst</strong>* surface.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#blit_scaled-class_method" title="blit_scaled (class method)">.<strong>blit_scaled</strong>(src, srcrect, dst, dstrect)  &#x21d2; nil </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Perform a fast scaling blit from *<strong>src</strong>* surface to *<strong>dst</strong>* surface.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#from_string-class_method" title="from_string (class method)">.<strong>from_string</strong>(string, width, heigth, depth, pitch = nil, rmask = nil, gmask = nil, bmask = nil, amask = nil)  &#x21d2; SDL2::Surface </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Create a RGB surface from pixel data as String object.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#load-class_method" title="load (class method)">.<strong>load</strong>(file)  &#x21d2; SDL2::Surface </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Load file and create a new <span class='object_link'><a href="" title="SDL2::Surface (class)">Surface</a></span>.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#load_bmp-class_method" title="load_bmp (class method)">.<strong>load_bmp</strong>(path)  &#x21d2; SDL2::Surface </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Load a surface from bmp file.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#new-class_method" title="new (class method)">.<strong>new</strong>(*args)  &#x21d2; SDL2::Surface </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Create an empty RGB surface.</p>
</div></span>
  
</li>

      
    </ul>
  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#bits_per_pixel-instance_method" title="#bits_per_pixel (instance method)">#<strong>bits_per_pixel</strong>  &#x21d2; Integer </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Get bits per pixel of the surface.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#blend_mode-instance_method" title="#blend_mode (instance method)">#<strong>blend_mode</strong>  &#x21d2; Integer </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Get the blending mode of the surface used for blit operations.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#blend_mode=-instance_method" title="#blend_mode= (instance method)">#<strong>blend_mode=</strong>(mode)  &#x21d2; mode </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Set the blending mode of the surface used for blit operations.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#blit_to-instance_method" title="#blit_to (instance method)">#<strong>blit_to</strong>(dst, x, y)  &#x21d2; self </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Perform a fast blit to *<strong>dst</strong>* surface.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#bytes_per_pixel-instance_method" title="#bytes_per_pixel (instance method)">#<strong>bytes_per_pixel</strong>  &#x21d2; Integer </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Get bytes per pixel of the surface.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#color_key-instance_method" title="#color_key (instance method)">#<strong>color_key</strong>  &#x21d2; Integer </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Get the color key of the surface.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#color_key=-instance_method" title="#color_key= (instance method)">#<strong>color_key=</strong>(key)  &#x21d2; key </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Set the color key of the surface.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#destroy-instance_method" title="#destroy (instance method)">#<strong>destroy</strong>  &#x21d2; nil </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Destroy the surface and deallocate the memory for pixels.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#destroy%3F-instance_method" title="#destroy? (instance method)">#<strong>destroy?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Return true if the surface is <span class='object_link'><a href="#destroy-instance_method" title="SDL2::Surface#destroy (method)">destroyed</a></span>.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#fill_rect-instance_method" title="#fill_rect (instance method)">#<strong>fill_rect</strong>(rect, color)  &#x21d2; nil </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Draw a filled rectangle using the given color.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#h-instance_method" title="#h (instance method)">#<strong>h</strong>  &#x21d2; Integer </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Get the height of the surface.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#lock-instance_method" title="#lock (instance method)">#<strong>lock</strong>  &#x21d2; nil </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Lock the surface.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#must_lock%3F-instance_method" title="#must_lock? (instance method)">#<strong>must_lock?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Return true if the surface need to lock when you get access to the pixel data of the surface.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#pitch-instance_method" title="#pitch (instance method)">#<strong>pitch</strong>  &#x21d2; Integer </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Get the pitch (bytes per horizontal line) of the surface.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#pixel-instance_method" title="#pixel (instance method)">#<strong>pixel</strong>(x, y)  &#x21d2; Integer </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Get a pixel data at (*<strong>x*</strong>, *<strong>y*</strong>).</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#pixel_color-instance_method" title="#pixel_color (instance method)">#<strong>pixel_color</strong>(x, y)  &#x21d2; [Integer, Integer, Integer, Integer] </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Get the pixel color (r,g,b and a) at (*<strong>x*</strong>, *<strong>y*</strong>) of the surface.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#pixels-instance_method" title="#pixels (instance method)">#<strong>pixels</strong>  &#x21d2; String </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Get all pixel data of the surface as a string.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#unlock-instance_method" title="#unlock (instance method)">#<strong>unlock</strong>  &#x21d2; nil </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Unlock the surface.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#unset_color_key-instance_method" title="#unset_color_key (instance method)">#<strong>unset_color_key</strong>  &#x21d2; nil </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Unset the color key of the surface.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#w-instance_method" title="#w (instance method)">#<strong>w</strong>  &#x21d2; Integer </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Get the width of the surface.</p>
</div></span>
  
</li>

      
    </ul>
  



  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="blit-class_method">
  
    .<strong>blit</strong>(src, srcrect, dst, dstrect)  &#x21d2; <tt>nil</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
  <div class="docstring">
  <div class="discussion">
    
<p>Perform a fast blit from *<strong>src</strong>* surface to *<strong>dst</strong>* surface.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>src</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="SDL2::Surface (class)">SDL2::Surface</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the source surface</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>srcrect</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Rect.html" title="SDL2::Rect (class)">SDL2::Rect</a></span></tt>, <tt>nil</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the region in the source surface, if nil is given, the whole source is used</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>dst</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="SDL2::Surface (class)">SDL2::Surface</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the destination surface</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>dstrect</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Rect.html" title="SDL2::Rect (class)">SDL2::Rect</a></span></tt>, <tt>nil</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the region in the destination surface if nil is given, the source image is copied to (0, 0) on the destination surface. *<strong>dstrect</strong>* is changed by this method to store the actually copied region (since the surface has clipping functionality, actually copied region may be different from given *<strong>dstrect</strong>*).</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>nil</tt>)</span>
      
      
      
    </li>
  
</ul>

</div>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


2905
2906
2907
2908
2909
2910
2911
2912</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/sdl2_ext/video.c', line 2905</span>

static VALUE Surface_s_blit(VALUE self, VALUE src, VALUE srcrect, VALUE dst, VALUE dstrect)
{
    HANDLE_ERROR(SDL_BlitSurface(Get_SDL_Surface(src),
                                 Get_SDL_Rect_or_NULL(srcrect),
                                 Get_SDL_Surface(dst),
                                 Get_SDL_Rect_or_NULL(dstrect)));
    return Qnil;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="blit_scaled-class_method">
  
    .<strong>blit_scaled</strong>(src, srcrect, dst, dstrect)  &#x21d2; <tt>nil</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
  <div class="docstring">
  <div class="discussion">
    
<p>Perform a fast scaling blit from *<strong>src</strong>* surface to *<strong>dst</strong>* surface.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>src</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="SDL2::Surface (class)">SDL2::Surface</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the source surface</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>srcrect</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Rect.html" title="SDL2::Rect (class)">SDL2::Rect</a></span></tt>, <tt>nil</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the region in the source surface, if nil is given, the whole source is used</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>dst</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="SDL2::Surface (class)">SDL2::Surface</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the destination surface</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>dstrect</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Rect.html" title="SDL2::Rect (class)">SDL2::Rect</a></span></tt>, <tt>nil</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the region in the destination surface if nil is given, the source image is copied to (0, 0) on the destination surface. *<strong>dstrect</strong>* is changed by this method to store the actually copied region (since the surface has clipping functionality, actually copied region may be different from given *<strong>dstrect</strong>*).</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>nil</tt>)</span>
      
      
      
    </li>
  
</ul>

</div>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


2930
2931
2932
2933
2934
2935
2936
2937</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/sdl2_ext/video.c', line 2930</span>

static VALUE Surface_s_blit_scaled(VALUE self, VALUE src, VALUE srcrect, VALUE dst, VALUE dstrect)
{
    HANDLE_ERROR(SDL_BlitScaled(Get_SDL_Surface(src),
                                Get_SDL_Rect_or_NULL(srcrect),
                                Get_SDL_Surface(dst),
                                Get_SDL_Rect_or_NULL(dstrect)));
    return Qnil;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="from_string-class_method">
  
    .<strong>from_string</strong>(string, width, heigth, depth, pitch = nil, rmask = nil, gmask = nil, bmask = nil, amask = nil)  &#x21d2; <tt><span class='object_link'><a href="" title="SDL2::Surface (class)">SDL2::Surface</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
  <div class="docstring">
  <div class="discussion">
    
<p>Create a RGB surface from pixel data as String object.</p>

<p>If rmask, gmask, bmask are omitted, the default masks are used. If amask is omitted, alpha mask is considered to be zero.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>string</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the pixel data</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>width</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the width of the creating surface</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>height</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the height of the creating surface</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>depth</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the color depth (in bits) of the creating surface</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>pitch</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>the number of bytes of one scanline if this argument is omitted, width*depth/8 is used.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>rmask</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>the red mask of a pixel</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>gmask</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>the green mask of a pixel</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>bmask</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>the blue mask of a pixel</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>amask</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>the alpha mask of a pixel</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="SDL2::Surface (class)">SDL2::Surface</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>a new surface</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Error.html" title="SDL2::Error (class)">SDL2::Error</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>raised when an error occurs in C SDL library</p>
</div>
      
    </li>
  
</ul>

</div>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


2527
2528
2529
2530
2531
2532
2533
2534
2535
2536
2537
2538
2539
2540
2541
2542
2543
2544
2545
2546
2547
2548
2549
2550
2551
2552
2553
2554
2555
2556
2557
2558
2559
2560
2561
2562
2563
2564</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/sdl2_ext/video.c', line 2527</span>

static VALUE Surface_s_from_string(int argc, VALUE* argv, VALUE self)
{
    VALUE string, width, height, depth, pitch, Rmask, Gmask, Bmask, Amask;
    int w, h, d, p, r, g, b, a;
    SDL_Surface* surface;
    void* pixels;
    Surface* s;

    rb_scan_args(argc, argv, &quot;45&quot;, &amp;string, &amp;width, &amp;height, &amp;depth,
                 &amp;pitch, &amp;Rmask, &amp;Gmask, &amp;Bmask, &amp;Amask);
    StringValue(string);
    w = NUM2INT(width);
    h = NUM2INT(height);
    d = NUM2INT(depth);
    p = (pitch == Qnil) ? d*w/8 : NUM2INT(pitch);
    r = (Rmask == Qnil) ? 0 : NUM2UINT(Rmask);
    g = (Gmask == Qnil) ? 0 : NUM2UINT(Gmask);
    b = (Bmask == Qnil) ? 0 : NUM2UINT(Bmask);
    a = (Amask == Qnil) ? 0 : NUM2UINT(Amask);

    if (RSTRING_LEN(string) &lt; p*h)
        rb_raise(rb_eArgError, &quot;String too short&quot;);
    if (p &lt; d*w/8 )
        rb_raise(rb_eArgError, &quot;pitch too small&quot;);

    pixels = ruby_xmalloc(RSTRING_LEN(string));
    memcpy(pixels, RSTRING_PTR(string), RSTRING_LEN(string));
    surface = SDL_CreateRGBSurfaceFrom(pixels, w, h, d, p, r, g, b, a);
    if (!surface)
        SDL_ERROR();

    RB_GC_GUARD(string);

    s = ALLOC(Surface);
    s-&gt;surface = surface;
    s-&gt;need_to_free_pixels = 1;
    return Data_Wrap_Struct(cSurface, 0, Surface_free, s);
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="load-class_method">
  
    .<strong>load</strong>(file)  &#x21d2; <tt><span class='object_link'><a href="" title="SDL2::Surface (class)">SDL2::Surface</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
  <div class="docstring">
  <div class="discussion">
    
<p>Load file and create a new <span class='object_link'><a href="" title="SDL2::Surface (class)">SDL2::Surface</a></span>.</p>

<p>This method uses SDL_image. SDL_image supports following formats: BMP, CUR, GIF, ICO, JPG, LBP, PCX, PNG, PNM, TGA, TIF, XCF, XPM, and XV.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>file</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the image file name to load a surface from</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="SDL2::Surface (class)">SDL2::Surface</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Created surface</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Error.html" title="SDL2::Error (class)">SDL2::Error</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>raised when you fail to load (for example, you have a wrong file name, or the file is broken)</p>
</div>
      
    </li>
  
</ul>

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="IMG.html#init-class_method" title="SDL2::IMG.init (method)">IMG.init</a></span></li>
    
      <li><span class='object_link'><a href="Renderer.html#load_texture-instance_method" title="SDL2::Renderer#load_texture (method)">Renderer#load_texture</a></span></li>
    
  </ul>

</div>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


4033
4034
4035
4036
4037
4038
4039
4040
4041</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/sdl2_ext/video.c', line 4033</span>

static VALUE Surface_s_load(VALUE self, VALUE fname)
{
    SDL_Surface* surface = IMG_Load(StringValueCStr(fname));
    if (!surface) {
        SDL_SetError(&quot;%s&quot;, IMG_GetError());
        SDL_ERROR();
    }
    return Surface_new(surface);
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="load_bmp-class_method">
  
    .<strong>load_bmp</strong>(path)  &#x21d2; <tt><span class='object_link'><a href="" title="SDL2::Surface (class)">SDL2::Surface</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
  <div class="docstring">
  <div class="discussion">
    
<p>Load a surface from bmp file.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>path</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>bmp file path</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="SDL2::Surface (class)">SDL2::Surface</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Error.html" title="SDL2::Error (class)">SDL2::Error</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>raised when an error occurs. For example, if there is no file or the file file format is not Windows BMP.</p>
</div>
      
    </li>
  
</ul>

</div>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


2495
2496
2497
2498
2499
2500
2501
2502
2503</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/sdl2_ext/video.c', line 2495</span>

static VALUE Surface_s_load_bmp(VALUE self, VALUE fname)
{
    SDL_Surface* surface = SDL_LoadBMP(StringValueCStr(fname));

    if (surface == NULL)
        HANDLE_ERROR(-1);

    return Surface_new(surface);
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="new-class_method">
  
    
      <span class="overload">.<strong>new</strong>(width, height, depth)  &#x21d2; <tt><span class='object_link'><a href="" title="SDL2::Surface (class)">SDL2::Surface</a></span></tt> </span>
    
      <span class="overload">.<strong>new</strong>(width, height, depth, amask)  &#x21d2; <tt><span class='object_link'><a href="" title="SDL2::Surface (class)">SDL2::Surface</a></span></tt> </span>
    
      <span class="overload">.<strong>new</strong>(width, heigth, depth, rmask, gmask, bmask, amask)  &#x21d2; <tt><span class='object_link'><a href="" title="SDL2::Surface (class)">SDL2::Surface</a></span></tt> </span>
    
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Create an empty RGB surface.</p>

<p>If rmask, gmask, bmask are omitted, the default masks are used. If amask is omitted, alpha mask is considered to be zero.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>width</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the width of the new surface</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>height</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the height of the new surface</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>depth</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the bit depth of the new surface</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>rmask</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the red mask of a pixel</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>gmask</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the green mask of a pixel</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>bmask</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the blue mask of a pixel</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>amask</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the alpha mask of a pixel</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="SDL2::Surface (class)">SDL2::Surface</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


2959
2960
2961
2962
2963
2964
2965
2966
2967
2968
2969
2970
2971
2972
2973
2974
2975
2976
2977
2978
2979
2980
2981
2982</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/sdl2_ext/video.c', line 2959</span>

static VALUE Surface_s_new(int argc, VALUE* argv, VALUE self)
{
    VALUE width, height, depth;
    Uint32 Rmask, Gmask, Bmask, Amask;
    SDL_Surface * surface;

    if  (argc == 3) {
        rb_scan_args(argc, argv, &quot;30&quot;, &amp;width, &amp;height, &amp;depth);
        Rmask = Gmask = Bmask = Amask = 0;
    } else if (argc == 7) {
        VALUE rm, gm, bm, am;
        rb_scan_args(argc, argv, &quot;70&quot;, &amp;width, &amp;height, &amp;depth, &amp;rm, &amp;gm, &amp;bm, &amp;am);
        Rmask = NUM2UINT(rm); Gmask = NUM2UINT(gm);
        Bmask = NUM2UINT(bm); Amask = NUM2UINT(am);
    } else {
        rb_raise(rb_eArgError, &quot;wrong number of arguments (%d for 4 or 7)&quot;, argc);
    }
    surface = SDL_CreateRGBSurface(0, NUM2INT(width), NUM2INT(height), NUM2INT(depth),
                                   Rmask, Gmask, Bmask, Amask);
    if (!surface)
        SDL_ERROR();

    return Surface_new(surface);
}</pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="bits_per_pixel-instance_method">
  
    #<strong>bits_per_pixel</strong>  &#x21d2; <tt>Integer</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Get bits per pixel of the surface.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


2708
2709
2710
2711</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/sdl2_ext/video.c', line 2708</span>

static VALUE Surface_bits_per_pixel(VALUE self)
{
    return UCHAR2NUM(Get_SDL_Surface(self)-&gt;format-&gt;BitsPerPixel);
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="blend_mode-instance_method">
  
    #<strong>blend_mode</strong>  &#x21d2; <tt>Integer</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Get the blending mode of the surface used for blit operations.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
    </li>
  
</ul>

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="#blend_mode=-instance_method" title="SDL2::Surface#blend_mode= (method)">#blend_mode=</a></span></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


2590
2591
2592
2593
2594
2595</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/sdl2_ext/video.c', line 2590</span>

static VALUE Surface_blend_mode(VALUE self)
{
    SDL_BlendMode mode;
    HANDLE_ERROR(SDL_GetSurfaceBlendMode(Get_SDL_Surface(self), &amp;mode));
    return INT2FIX(mode);
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="blend_mode=-instance_method">
  
    #<strong>blend_mode=</strong>(mode)  &#x21d2; <tt>mode</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
  <div class="docstring">
  <div class="discussion">
    
<p>Set the blending mode of the surface used for blit operations.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>mode</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the blending mode</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>mode</tt>)</span>
      
      
      
    </li>
  
</ul>

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="#blend_mode-instance_method" title="SDL2::Surface#blend_mode (method)">#blend_mode</a></span></li>
    
  </ul>

</div>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


2605
2606
2607
2608
2609</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/sdl2_ext/video.c', line 2605</span>

static VALUE Surface_set_blend_mode(VALUE self, VALUE mode)
{
    HANDLE_ERROR(SDL_SetSurfaceBlendMode(Get_SDL_Surface(self), NUM2INT(mode)));
    return mode;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="blit_to-instance_method">
  
    #<strong>blit_to</strong>(dst, x, y)  &#x21d2; <tt>self</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
  <div class="docstring">
  <div class="discussion">
    
<p>Perform a fast blit to *<strong>dst</strong>* surface.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>dst</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="SDL2::Surface (class)">SDL2::Surface</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the destination surface</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>x</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>y</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Blits this surface onto the given destination surface at the given coordinates.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>self</tt>)</span>
      
      
      
    </li>
  
</ul>

</div>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


2854
2855
2856
2857
2858
2859
2860
2861
2862
2863
2864
2865
2866
2867
2868
2869</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/sdl2_ext/video.c', line 2854</span>

static VALUE Surface_blit_to(VALUE self, VALUE dst, VALUE x, VALUE y)
{
    SDL_Surface *surface = Get_SDL_Surface(self);
    SDL_Rect rect;

    rect.x = FIX2INT(x);
    rect.y = FIX2INT(y);
    rect.w = surface-&gt;w;
    rect.h = surface-&gt;h;

    HANDLE_ERROR(SDL_BlitSurface(surface,
                                 NULL,
                                 Get_SDL_Surface(dst),
                                 &amp;rect));
    return self;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="bytes_per_pixel-instance_method">
  
    #<strong>bytes_per_pixel</strong>  &#x21d2; <tt>Integer</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Get bytes per pixel of the surface.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


2718
2719
2720
2721</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/sdl2_ext/video.c', line 2718</span>

static VALUE Surface_bytes_per_pixel(VALUE self)
{
    return UCHAR2NUM(Get_SDL_Surface(self)-&gt;format-&gt;BytesPerPixel);
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="color_key-instance_method">
  
    #<strong>color_key</strong>  &#x21d2; <tt>Integer</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Get the color key of the surface</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the color key, as pixel value (see <span class='object_link'><a href="#pixel-instance_method" title="SDL2::Surface#pixel (method)">#pixel</a></span>)</p>
</div>
      
    </li>
  
</ul>

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="#color_key=-instance_method" title="SDL2::Surface#color_key= (method)">#color_key=</a></span></li>
    
      <li><span class='object_link'><a href="#unset_color_key-instance_method" title="SDL2::Surface#unset_color_key (method)">#unset_color_key</a></span></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


2813
2814
2815
2816
2817
2818
2819
2820</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/sdl2_ext/video.c', line 2813</span>

static VALUE Surface_color_key(VALUE self)
{
    Uint32 key;
    if (SDL_GetColorKey(Get_SDL_Surface(self), &amp;key) &lt; 0)
        return Qnil;
    else
        return UINT2NUM(key);
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="color_key=-instance_method">
  
    #<strong>color_key=</strong>(key)  &#x21d2; <tt>key</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
  <div class="docstring">
  <div class="discussion">
    
<p>Set the color key of the surface</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>key</span>
      
      
        <span class='type'>(<tt>Integer</tt>, <tt>Array&lt;Integer&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the color key, pixel value (see <span class='object_link'><a href="#pixel-instance_method" title="SDL2::Surface#pixel (method)">#pixel</a></span>) or pixel color (array of three or four integer elements).</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>key</tt>)</span>
      
      
      
    </li>
  
</ul>

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="#color_key-instance_method" title="SDL2::Surface#color_key (method)">#color_key</a></span></li>
    
      <li><span class='object_link'><a href="#unset_color_key-instance_method" title="SDL2::Surface#unset_color_key (method)">#unset_color_key</a></span></li>
    
  </ul>

</div>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


2794
2795
2796
2797
2798
2799
2800
2801
2802
2803</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/sdl2_ext/video.c', line 2794</span>

static VALUE Surface_set_color_key(VALUE self, VALUE key)
{
    SDL_Surface* surface = Get_SDL_Surface(self);
    if (key == Qnil)
        return Surface_unset_color_key(self);

    HANDLE_ERROR(SDL_SetColorKey(surface, SDL_TRUE, pixel_value(key, surface-&gt;format)));

    return key;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="destroy-instance_method">
  
    #<strong>destroy</strong>  &#x21d2; <tt>nil</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Destroy the surface and deallocate the memory for pixels.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>nil</tt>)</span>
      
      
      
    </li>
  
</ul>

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="#destroy%3F-instance_method" title="SDL2::Surface#destroy? (method)">#destroy?</a></span></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


2572
2573
2574
2575
2576
2577
2578
2579
2580
2581
2582</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/sdl2_ext/video.c', line 2572</span>

static VALUE Surface_destroy(VALUE self)
{
    Surface* s = Get_Surface(self);
    if (s-&gt;need_to_free_pixels)
        free(s-&gt;surface-&gt;pixels);
    s-&gt;need_to_free_pixels = 0;
    if (s-&gt;surface)
        SDL_FreeSurface(s-&gt;surface);
    s-&gt;surface = NULL;
    return Qnil;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="destroy?-instance_method">
  
    #<strong>destroy?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Return true if the surface is <span class='object_link'><a href="#destroy-instance_method" title="SDL2::Surface#destroy (method)">destroyed</a></span>.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="fill_rect-instance_method">
  
    #<strong>fill_rect</strong>(rect, color)  &#x21d2; <tt>nil</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
  <div class="docstring">
  <div class="discussion">
    
<p>Draw a filled rectangle using the given color.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>rect</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Rect.html" title="SDL2::Rect (class)">SDL2::Rect</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the drawing rectangle</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>color</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>nil</tt>)</span>
      
      
      
    </li>
  
</ul>

</div>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


2881
2882
2883
2884
2885
2886
2887</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/sdl2_ext/video.c', line 2881</span>

static VALUE Surface_fill_rect(VALUE self, VALUE rect, VALUE rgba)
{
    /* Remove alpha channel */
    Uint32 color = NUM2UINT(rgba) &gt;&gt; 8;
    HANDLE_ERROR(SDL_FillRect(Get_SDL_Surface(self), Get_SDL_Rect_or_NULL(rect), color));
    return Qnil;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="h-instance_method">
  
    #<strong>h</strong>  &#x21d2; <tt>Integer</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Get the height of the surface.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


2837
2838
2839
2840</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/sdl2_ext/video.c', line 2837</span>

static VALUE Surface_h(VALUE self)
{
    return INT2NUM(Get_SDL_Surface(self)-&gt;h);
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="lock-instance_method">
  
    #<strong>lock</strong>  &#x21d2; <tt>nil</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Lock the surface.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>nil</tt>)</span>
      
      
      
    </li>
  
</ul>

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="#unlock-instance_method" title="SDL2::Surface#unlock (method)">#unlock</a></span></li>
    
      <li><span class='object_link'><a href="#must_lock%3F-instance_method" title="SDL2::Surface#must_lock? (method)">#must_lock?</a></span></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


2630
2631
2632
2633
2634</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/sdl2_ext/video.c', line 2630</span>

static VALUE Surface_lock(VALUE self)
{
    HANDLE_ERROR(SDL_LockSurface(Get_SDL_Surface(self)));
    return Qnil;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="must_lock?-instance_method">
  
    #<strong>must_lock?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Return true if the surface need to lock when you get access to the pixel data of the surface.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="#lock-instance_method" title="SDL2::Surface#lock (method)">#lock</a></span></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


2617
2618
2619
2620</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/sdl2_ext/video.c', line 2617</span>

static VALUE Surface_must_lock_p(VALUE self)
{
    return INT2BOOL(SDL_MUSTLOCK(Get_SDL_Surface(self)));
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="pitch-instance_method">
  
    #<strong>pitch</strong>  &#x21d2; <tt>Integer</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Get the pitch (bytes per horizontal line) of the surface.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


2698
2699
2700
2701</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/sdl2_ext/video.c', line 2698</span>

static VALUE Surface_pitch(VALUE self)
{
    return UINT2NUM(Get_SDL_Surface(self)-&gt;pitch);
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="pixel-instance_method">
  
    #<strong>pixel</strong>(x, y)  &#x21d2; <tt>Integer</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
  <div class="docstring">
  <div class="discussion">
    
<p>Get a pixel data at (*<strong>x*</strong>, *<strong>y*</strong>)</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>x</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the x coordinate</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>y</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the y coordinate</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>pixel data</p>
</div>
      
    </li>
  
</ul>

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="#pixel_color-instance_method" title="SDL2::Surface#pixel_color (method)">#pixel_color</a></span></li>
    
  </ul>

</div>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


2660
2661
2662
2663
2664
2665
2666
2667
2668
2669
2670
2671
2672
2673
2674
2675
2676
2677
2678</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/sdl2_ext/video.c', line 2660</span>

static VALUE Surface_pixel(VALUE self, VALUE x_coord, VALUE y_coord)
{
    int x = NUM2INT(x_coord);
    int y = NUM2INT(y_coord);
    SDL_Surface* surface = Get_SDL_Surface(self);
    int offset;
    Uint32 pixel = 0;
    int i;

    if (x &lt; 0 || x &gt;= surface-&gt;w || y &lt; 0 || y &gt;= surface-&gt;h)
        rb_raise(rb_eArgError, &quot;(%d, %d) out of range for %dx%d&quot;,
                 x, y, surface-&gt;w, surface-&gt;h);
    offset = surface-&gt;pitch * y + surface-&gt;format-&gt;BytesPerPixel * x;
    for (i=0; i&lt;surface-&gt;format-&gt;BytesPerPixel; ++i) {
        pixel += *((Uint8*)surface-&gt;pixels + offset + i) &lt;&lt; (8*i);
    }

    return UINT2NUM(SDL_SwapLE32(pixel));
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="pixel_color-instance_method">
  
    #<strong>pixel_color</strong>(x, y)  &#x21d2; <tt>[Integer, Integer, Integer, Integer]</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
  <div class="docstring">
  <div class="discussion">
    
<p>Get the pixel color (r,g,b and a) at (*<strong>x*</strong>, *<strong>y*</strong>) of the surface.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>x</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the x coordinate</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>y</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the y coordinate</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>[Integer, Integer, Integer, Integer]</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the red, green, blue, and alpha component of the specified pixel.</p>
</div>
      
    </li>
  
</ul>

</div>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


2733
2734
2735
2736
2737
2738
2739
2740
2741</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/sdl2_ext/video.c', line 2733</span>

static VALUE Surface_pixel_color(VALUE self, VALUE x, VALUE y)
{
    Uint32 pixel = NUM2UINT(Surface_pixel(self, x, y));
    SDL_Surface* surface = Get_SDL_Surface(self);
    Uint8 r, g, b, a;
    SDL_GetRGBA(pixel, surface-&gt;format, &amp;r, &amp;g, &amp;b, &amp;a);

    return rb_ary_new3(4, UCHAR2NUM(r), UCHAR2NUM(g), UCHAR2NUM(b), UCHAR2NUM(a));
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="pixels-instance_method">
  
    #<strong>pixels</strong>  &#x21d2; <tt>String</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Get all pixel data of the surface as a string.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


2686
2687
2688
2689
2690
2691</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/sdl2_ext/video.c', line 2686</span>

static VALUE Surface_pixels(VALUE self)
{
    SDL_Surface* surface = Get_SDL_Surface(self);
    int size = surface-&gt;h * surface-&gt;pitch;
    return rb_str_new(surface-&gt;pixels, size);
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="unlock-instance_method">
  
    #<strong>unlock</strong>  &#x21d2; <tt>nil</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Unlock the surface.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>nil</tt>)</span>
      
      
      
    </li>
  
</ul>

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="#lock-instance_method" title="SDL2::Surface#lock (method)">#lock</a></span></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


2643
2644
2645
2646
2647</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/sdl2_ext/video.c', line 2643</span>

static VALUE Surface_unlock(VALUE self)
{
    SDL_UnlockSurface(Get_SDL_Surface(self));
    return Qnil;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="unset_color_key-instance_method">
  
    #<strong>unset_color_key</strong>  &#x21d2; <tt>nil</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Unset the color key of the surface.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>nil</tt>)</span>
      
      
      
    </li>
  
</ul>

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="#color_key=-instance_method" title="SDL2::Surface#color_key= (method)">#color_key=</a></span></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


2775
2776
2777
2778
2779</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/sdl2_ext/video.c', line 2775</span>

static VALUE Surface_unset_color_key(VALUE self)
{
    HANDLE_ERROR(SDL_SetColorKey(Get_SDL_Surface(self), SDL_FALSE, 0));
    return Qnil;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="w-instance_method">
  
    #<strong>w</strong>  &#x21d2; <tt>Integer</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Get the width of the surface.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


2827
2828
2829
2830</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/sdl2_ext/video.c', line 2827</span>

static VALUE Surface_w(VALUE self)
{
    return INT2NUM(Get_SDL_Surface(self)-&gt;w);
}</pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Sun Jul  5 05:02:13 2020 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.25 (ruby-2.7.1).
</div>

    </div>
  </body>
</html>